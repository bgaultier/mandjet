{% extends "base.html" %}
{% load staticfiles %}
{% load bootstrap4 %}
{% load i18n %}
{% load humanize %}

{% block title %}{% trans "Calendar" %}{% endblock %}

{% block calendar_active %} active{% endblock %}

{% block content %}
<div class="container-fluid">
	{% if object_list %}
	<div class="card shadow mb-4">
		<div class="card-header py-3">
			<h6 class="m-0 font-weight-bold text-primary">{% trans "Bookings" %}</h6>
    </div>
		<div class="card-body">
			<div class="table-responsive">
				<table class="table table-hover table-bordered">
	        <thead>
	          <tr>
	            <th scope="col">{% trans "Vehicle" %}</th>
	            <th scope="col">{% trans "Booking" %}</th>
	            <th scope="col">{% trans "User" %}</th>
							<th scope="col">{% trans "Actions" %}</th>
	          </tr>
	        </thead>
	        <tbody>
						{% for booking in object_list %}
	          <tr>
	            <th scope="row">{{ booking.vehicle }}</th>
	            <td>{{ booking.start|naturalday }} {% trans "at" %} {{ booking.start|time:"H:i" }} → {{ booking.end|naturalday }} {% trans "at" %} {{ booking.end|time:"H:i" }}</td>
	            <td>{% if booking.user.first_name %}{{ booking.user.first_name }} {{ booking.user.last_name }}{% else %}{{ booking.user }}{% endif %}</td>
							<td>{% if request.user == booking.user %}
								<a href="{% url 'nanogrid:delete' booking.vehicle.id booking.id %}" class="btn btn-danger btn-circle btn-sm">
	                <i class="fas fa-trash"></i>
	              </a>
							</td>{% endif %}
	          </tr>

						{% endfor %}
	        </tbody>
	      </table>
			</div>
		</div>
	</div>

	{% else %}
	<div class="container-fluid">
    <div class="text-center">
      <h2 class="mx-auto">No booking yet <i class="far fa-sad-cry"></i></h2>
      <a href="{% url 'index' %}">← Go to Dashboard</a>
    </div>
  </div>
	{% endif %}
</div>
{% endblock %}
